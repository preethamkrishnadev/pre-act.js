{"version":3,"file":"pre-act.umd.js","sources":["../core/vdom.js","../core/createApp.js","../core/logger.js","../core/events.js","../core/store.js","../core/router.js","../core/render.js","../core/safe-storage.js","../core/env.js","../core/mixin.js","../core/memo.js","../core/polyfills.js","../core/api.js","../core/rerender.js","../core/pages.js","../core/animation.js","../core/hooks.js"],"sourcesContent":["export function createElement(type, props = {}, ...children) {\n    return { type, props: props || {}, children };\n  }\n  ","import { createElement } from './vdom.js';\nimport { render } from './rerender.js';\n\nexport let isDebugMode = false;\n\nexport function createApp(App, selector = '#app', props = {}) {\n  const container = document.querySelector(selector);\n\n  function mount() {\n    import('./polyfills.js');\n    const vnode = createElement(App, props);\n    render(vnode, container);\n  }\n\n  const app = {\n    mount,\n    debug: false\n  };\n\n  Object.defineProperty(app, 'debug', {\n    get: () => isDebugMode,\n    set: (value) => {\n      isDebugMode = value;\n      window.__preact_debug__ = value;\n    }\n  });\n\n  return app;\n}\n","export function pushToDataLayer(eventName, params) {\n  window.dataLayer = window.dataLayer || [];\n  window.dataLayer.push({ event: eventName, ...params });\n}\n\nexport function pushToFeLogs(eventName, params) {\n  window.felogs = window.felogs || [];\n  window.felogs.push({ event: eventName, ...params });\n}\n\nexport function logEvent(componentName, eventName, params = {}) {\n  pushToDataLayer(eventName, params);\n  pushToFeLogs(eventName, params);\n\n  if (window.__preact_debug__) {\n    console.groupCollapsed(`[Logging] ${componentName}`);\n    console.log('Event:', eventName);\n    console.log('Params:', params);\n    console.groupEnd();\n  }\n}\n","const globalListeners = new Map();\nlet idCounter = 0;\n\nexport function triggerEvent(eventName, payload, scope = null) {\n  globalListeners.forEach(({ event, callback, componentName }) => {\n    if (event === eventName && (!scope || scope.includes(componentName))) {\n      callback(payload);\n    }\n  });\n}\n\nexport function registerListener(event, callback, componentName) {\n  const id = ++idCounter;\n  globalListeners.set(id, { event, callback, componentName });\n  return () => globalListeners.delete(id);\n}\n","import { rerender } from './rerender.js';\n\nconst globalStore = {};\nlet storeListeners = new Set();\n\nfunction deepSet(obj, path, value) {\n  const keys = path.split('.');\n  let current = obj;\n  for (let i = 0; i < keys.length - 1; i++) {\n    if (!current[keys[i]]) current[keys[i]] = {};\n    current = current[keys[i]];\n  }\n  current[keys[keys.length - 1]] = value;\n}\n\nfunction deepGet(obj, path) {\n  return path.split('.').reduce((acc, key) => acc?.[key], obj);\n}\n\nfunction createStoreProxy(state) {\n  return new Proxy(state, {\n    get(target, key) {\n      const value = target[key];\n      if (typeof value === 'object' && value !== null) {\n        return createStoreProxy(value);\n      }\n      return value;\n    },\n    set(target, key, value) {\n      target[key] = value;\n      storeListeners.forEach(fn => fn(globalStore));\n      rerender();\n      return true;\n    }\n  });\n}\n\nexport const $store = createStoreProxy(globalStore);\n\nexport function setStoreValue(path, value) {\n  deepSet(globalStore, path, value);\n  storeListeners.forEach(fn => fn(globalStore));\n  rerender();\n}\n\nexport function useStoreSubscribe(listener) {\n  storeListeners.add(listener);\n  return () => storeListeners.delete(listener);\n}\n","import { rerender } from './rerender.js';\n\nconst globalMiddlewares = [];\n\nexport function useGlobalMiddleware(middlewareFn) {\n  globalMiddlewares.push(middlewareFn);\n}\n\nexport function buildPath(template, query = {}, params = {}) {\n  let path = template;\n\n  path = path.replace(/{(.*?)}/g, (_, key) => params[key] || '');\n\n  const queryStr = Object.entries(query)\n    .map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)\n    .join('&');\n\n  return queryStr ? `${path}?${queryStr}` : path;\n}\n\nfunction pathToRegex(path) {\n  return new RegExp('^' + path\n    .replace(/:([\\w]+)\\*/g, '(.*)')    // catch all\n    .replace(/:([\\w]+)/g, '([^/]+)')   // single dynamic\n    + '$');\n}\n\nfunction getParams(match, route) {\n  const values = match.slice(1);\n  const keys = Array.from(route.path.matchAll(/:([\\w]+)\\*?/g)).map(m => m[1]);\n\n  const params = {};\n  keys.forEach((key, index) => {\n    const raw = values[index];\n    params[key] = raw.includes('/') ? raw.split('/') : raw;\n  });\n\n  return params;\n}\n\nexport function Router({ routes, fallback = () => '404 Not Found' }) {\n  let current = {\n    path: window.location.pathname,\n    params: {},\n    component: fallback\n  };\n\n  async function onLocationChange() {\n    const pathname = window.location.pathname;\n\n    for (const route of routes) {\n      const regex = pathToRegex(route.path);\n      const match = pathname.match(regex);\n\n      if (match) {\n        const params = getParams(match, route);\n        const context = { path: pathname, params };\n\n        for (const mw of globalMiddlewares) {\n          const result = await mw(context);\n          if (result === false) return;\n          if (typeof result === 'string') return navigate(result);\n        }\n\n        if (route.middleware) {\n          const middlewares = Array.isArray(route.middleware) ? route.middleware : [route.middleware];\n          for (const mw of middlewares) {\n            const result = await mw(context);\n            if (result === false) return;\n            if (typeof result === 'string') return navigate(result);\n          }\n        }\n\n        current = { path: pathname, params, component: route.component };\n        rerender();\n        return;\n      }\n    }\n\n    current = { path: pathname, params: {}, component: fallback };\n    rerender();\n  }\n\n  window.addEventListener('popstate', onLocationChange);\n  onLocationChange();\n\n  const Page = current.component;\n  return Page ? Page({ params: current.params }) : null;\n}\n\nexport function navigate(path) {\n  window.history.pushState({}, '', path);\n  window.dispatchEvent(new Event('popstate'));\n}\n","import { isDebugMode } from './createApp.js';\nimport { logEvent } from './logger.js';\nimport { triggerEvent, registerListener } from './events.js';\nimport { $store, setStoreValue } from './store.js';\nimport { navigate, buildPath } from './router.js';\n\nexport function render(vnode, container) {\n  container.innerHTML = '';\n  container.appendChild(createDomElement(vnode));\n}\n\nexport function rerender() {\n  // Add rerender logic if needed for future diff optimization\n}\n\nfunction createDomElement(vnode) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return document.createTextNode(vnode);\n  }\n  \n  if (typeof vnode.type === 'function') {\n    const node = createNode(vnode);\n    const componentVNode = vnode.type({ ...vnode.props }, node);\n    const el = createDomElement(componentVNode);\n    \n    setTimeout(() => {\n      if (isDebugMode) node.log('mounted');\n    }, 0);\n    \n    return el;\n  }\n  \n  const el = document.createElement(vnode.type);\n  \n  for (const [name, value] of Object.entries(vnode.props || {})) {\n    if (name.startsWith('@')) {\n      el.addEventListener(name.slice(1), value);\n    } else {\n      el.setAttribute(name, value);\n    }\n  }\n  \n  for (const child of vnode.children) {\n    el.appendChild(createDomElement(child));\n  }\n  \n  return el;\n}\n\nfunction createNode(vnode) {\n  const url = new URL(window.location.href);\n\n  const node = {\n    path: url.pathname,\n    host: url.host,\n    queryParams: Object.fromEntries(url.searchParams.entries()),\n    hash: url.hash,\n    urlParams: vnode.props?.params || {},\n    forceRender: false,\n    $store: $store,\n    store: (keyPath, value) => setStoreValue(keyPath, value),\n    storeSlice: (slice) => ({\n      store: (keyPath, value) => setStoreValue(`${slice}.${keyPath}`, value)\n    }),\n    log: (eventName, ...params) => {\n      logEvent(vnode.type.name || 'UnknownComponent', eventName, params[0] || {});\n    },\n    navigate: (pathTemplate, queryParams = {}, params = {}) => {\n      navigate(buildPath(pathTemplate, queryParams, params));\n    },\n    trigger(eventName, payload) {\n      triggerEvent(eventName, payload);\n    },\n    onTrigger(eventName, callback) {\n      const componentName = vnode.type.name || 'UnknownComponent';\n      return registerListener(eventName, callback, componentName);\n    }\n  };\n\n  if (isDebugMode) {\n    node.log('created');\n  }\n  \n  return node;\n}\n","function safeStorage(storage) {\n  try {\n    storage.setItem('__test', '1');\n    storage.removeItem('__test');\n    return storage;\n  } catch {\n    let memory = {};\n    return {\n      getItem: (k) => memory[k],\n      setItem: (k, v) => memory[k] = v,\n      removeItem: (k) => delete memory[k],\n      clear: () => { memory = {}; }\n    };\n  }\n}\n\nexport const SafeLocalStorage = safeStorage(window.localStorage);\nexport const SafeSessionStorage = safeStorage(window.sessionStorage);\n","const ENVIRONMENTS = {\n  development: { apiBaseURL: 'http://localhost:3000/api' },\n  staging: { apiBaseURL: 'https://staging.api.dreamtree.in.net/api' },\n  production: { apiBaseURL: 'https://api.dreamtree.in.net/api' }\n};\n\nexport const ENV = (() => {\n  const hostname = window.location.hostname;\n  if (hostname.includes('localhost')) return ENVIRONMENTS.development;\n  if (hostname.includes('staging')) return ENVIRONMENTS.staging;\n  return ENVIRONMENTS.production;\n})();\n","export const Mixin = {\n  Providers({ value, children }) {\n    window.__preact_context = { ...window.__preact_context, ...value };\n    return children;\n  }\n};\n","function deepEqual(obj1, obj2) {\n  return JSON.stringify(obj1) === JSON.stringify(obj2);\n}\n\nexport function memo(Component, areEqual = deepEqual) {\n  return function MemoizedComponent(props, node) {\n    const cacheKey = `${Component.name}_${JSON.stringify(props)}`;\n    const lastRender = node.memoCache?.[Component.name];\n\n    if (lastRender && areEqual(lastRender.props, props)) {\n      return lastRender.vnode;\n    }\n\n    const vnode = Component(props, node);\n    node.memoCache = node.memoCache || {};\n    node.memoCache[Component.name] = { props, vnode };\n    return vnode;\n  };\n}\n","if (typeof Promise === 'undefined') {\n    import('https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js');\n  }\n  \n  if (typeof Object.assign !== 'function') {\n    Object.assign = function(target, ...args) {\n      if (target == null) throw new TypeError('Cannot convert undefined or null to object');\n      for (let i = 0; i < args.length; i++) {\n        const source = args[i];\n        if (source != null) {\n          for (const key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n      }\n      return target;\n    };\n  }\n  ","import { ENV } from './env.js';\n\nexport async function api(path, method = 'GET', body = null, headers = {}) {\n  const url = ENV.apiBaseURL + path;\n  const options = { method, headers: { 'Content-Type': 'application/json', ...headers } };\n  if (body) options.body = JSON.stringify(body);\n\n  const res = await fetch(url, options);\n  return res.headers.get('content-type')?.includes('application/json') ? res.json() : res.text();\n}\n","export function render(vnode, container) {\n  container.innerHTML = '';\n  container.appendChild(createDomElement(vnode));\n}\n\nexport function rerender() {\n    // Add rerender logic if needed for future diff optimization\n  }","export function loadPages() {\n  const pages = import.meta.glob('/resources/js/pages/**/page.jsx', { eager: true });\n\n  const routes = [];\n\n  for (const path in pages) {\n    const page = pages[path];\n\n    let routePath = path\n      .replace('/resources/js/pages', '')\n      .replace('/page.jsx', '')\n      .replace(/\\*as\\[(.*?)\\]/g, ':$1*')\n      .replace(/\\[(.*?)\\]/g, ':$1')\n      .replace(/\\/index$/, '/');\n\n    routes.push({\n      path: routePath === '' ? '/' : routePath,\n      component: page.default,\n      middleware: page.middleware || []\n    });\n  }\n\n  return routes;\n}\n","export function onEnter(el, animation = 'fade-in') {\n  el.classList.add('preact-anim-enter', animation);\n  requestAnimationFrame(() => {\n    el.classList.add('preact-anim-enter-active');\n  });\n}\n\nexport function onExit(el, animation = 'fade-out', done = () => {}) {\n  el.classList.add('preact-anim-exit', animation);\n  el.addEventListener('animationend', done, { once: true });\n}\n","import { rerender } from './rerender.js';\n\nexport function useState(initialState = {}) {\n  let listeners = new Set();\n  let changeWatchers = new Map();\n  let currentState = initialState;\n\n  function notifyChange(newState, oldState) {\n    for (const [key, callback] of changeWatchers) {\n      if (key === '*') {\n        callback(newState, oldState);\n      } else {\n        const keys = key.split('.');\n        const newVal = keys.reduce((acc, k) => acc?.[k], newState);\n        const oldVal = keys.reduce((acc, k) => acc?.[k], oldState);\n        if (newVal !== oldVal) {\n          callback(newVal, oldVal);\n        }\n      }\n    }\n  }\n\n  function createProxy(state, rootPath = '') {\n    return new Proxy(state, {\n      get(target, prop) {\n        const value = target[prop];\n        if (typeof value === 'object' && value !== null) {\n          return createProxy(value, `${rootPath}${prop}.`);\n        }\n        return value;\n      },\n      set(target, prop, value) {\n        const oldState = JSON.parse(JSON.stringify(currentState));\n        target[prop] = value;\n        notifyChange(currentState, oldState);\n        listeners.forEach(fn => fn(currentState));\n        rerender();\n        return true;\n      }\n    });\n  }\n\n  const proxyState = createProxy(currentState);\n\n  function onLocalStateChange(watchers) {\n    if (typeof watchers === 'function') {\n      changeWatchers.set('*', watchers);\n    } else {\n      Object.entries(watchers).forEach(([path, callback]) => {\n        changeWatchers.set(path, callback);\n      });\n    }\n  }\n\n  function setLocalState(updater) {\n    const oldState = JSON.parse(JSON.stringify(currentState));\n    if (typeof updater === 'function') {\n      currentState = updater(currentState);\n    } else {\n      currentState = { ...currentState, ...updater };\n    }\n    notifyChange(currentState, oldState);\n    listeners.forEach(fn => fn(currentState));\n    rerender();\n  }\n\n  return [proxyState, onLocalStateChange, setLocalState];\n}\n"],"names":["createElement","type","props","children","isDebugMode","logEvent","componentName","eventName","params","window","dataLayer","push","event","pushToDataLayer","felogs","pushToFeLogs","__preact_debug__","console","groupCollapsed","log","groupEnd","globalListeners","Map","idCounter","globalStore","storeListeners","Set","$store","createStoreProxy","state","Proxy","get","target","key","value","set","forEach","fn","setStoreValue","path","obj","keys","split","current","i","length","deepSet","globalMiddlewares","getParams","match","route","values","slice","Array","from","matchAll","map","m","index","raw","includes","navigate","history","pushState","dispatchEvent","Event","createDomElement","vnode","document","createTextNode","node","url","URL","location","href","pathname","host","queryParams","Object","fromEntries","searchParams","entries","hash","urlParams","forceRender","store","keyPath","storeSlice","name","pathTemplate","template","query","replace","_","queryStr","k","v","encodeURIComponent","join","buildPath","trigger","payload","scope","callback","triggerEvent","onTrigger","id","delete","registerListener","createNode","el","setTimeout","startsWith","addEventListener","setAttribute","child","appendChild","safeStorage","storage","setItem","removeItem","memory","getItem","clear","SafeLocalStorage","localStorage","SafeSessionStorage","sessionStorage","ENVIRONMENTS","apiBaseURL","ENV","hostname","Mixin","Providers","__preact_context","deepEqual","obj1","obj2","JSON","stringify","Promise","import","assign","args","TypeError","source","prototype","hasOwnProperty","call","routes","fallback","component","async","onLocationChange","regex","RegExp","context","mw","result","middleware","middlewares","isArray","Page","method","body","headers","options","res","fetch","json","text","App","selector","container","querySelector","app","mount","innerHTML","render","debug","defineProperty","pages","undefined","eager","page","routePath","default","Component","areEqual","lastRender","memoCache","animation","classList","add","requestAnimationFrame","done","once","middlewareFn","initialState","listeners","changeWatchers","currentState","notifyChange","newState","oldState","newVal","reduce","acc","oldVal","createProxy","rootPath","prop","parse","watchers","updater","listener"],"mappings":"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"}