{"version":3,"file":"pre-act.umd.js","sources":["../core/vdom.js","../core/config.js","../core/logger.js","../core/events.js","../core/store.js","../core/router.js","../core/render.js","../core/safe-storage.js","../core/env.js","../core/mixin.js","../core/memo.js","../core/polyfills.js","../core/api.js","../core/createApp.js","../core/pages.js","../core/animation.js","../core/hooks.js"],"sourcesContent":["export function createElement(type, props = {}, ...children) {\n    return { type, props: props || {}, children };\n  }\n  ","export default {\n    isDebugMode: false,\n    isSSR: false,\n}","export function pushToDataLayer(eventName, params) {\n  window.dataLayer = window.dataLayer || [];\n  window.dataLayer.push({ event: eventName, ...params });\n}\n\nexport function pushToFeLogs(eventName, params) {\n  window.felogs = window.felogs || [];\n  window.felogs.push({ event: eventName, ...params });\n}\n\nexport function logEvent(componentName, eventName, params = {}) {\n  pushToDataLayer(eventName, params);\n  pushToFeLogs(eventName, params);\n\n  if (window.__preact_debug__) {\n    console.groupCollapsed(`[Logging] ${componentName}`);\n    console.log('Event:', eventName);\n    console.log('Params:', params);\n    console.groupEnd();\n  }\n}\n","const globalListeners = new Map();\nlet idCounter = 0;\n\nexport function triggerEvent(eventName, payload, scope = null) {\n  globalListeners.forEach(({ event, callback, componentName }) => {\n    if (event === eventName && (!scope || scope.includes(componentName))) {\n      callback(payload);\n    }\n  });\n}\n\nexport function registerListener(event, callback, componentName) {\n  const id = ++idCounter;\n  globalListeners.set(id, { event, callback, componentName });\n  return () => globalListeners.delete(id);\n}\n","import { rerender } from './rerender.js';\n\nconst globalStore = {};\nlet storeListeners = new Set();\n\nfunction deepSet(obj, path, value) {\n  const keys = path.split('.');\n  let current = obj;\n  for (let i = 0; i < keys.length - 1; i++) {\n    if (!current[keys[i]]) current[keys[i]] = {};\n    current = current[keys[i]];\n  }\n  current[keys[keys.length - 1]] = value;\n}\n\nfunction deepGet(obj, path) {\n  return path.split('.').reduce((acc, key) => acc?.[key], obj);\n}\n\nfunction createStoreProxy(state) {\n  return new Proxy(state, {\n    get(target, key) {\n      const value = target[key];\n      if (typeof value === 'object' && value !== null) {\n        return createStoreProxy(value);\n      }\n      return value;\n    },\n    set(target, key, value) {\n      target[key] = value;\n      storeListeners.forEach(fn => fn(globalStore));\n      rerender();\n      return true;\n    }\n  });\n}\n\nexport const $store = createStoreProxy(globalStore);\n\nexport function setStoreValue(path, value) {\n  deepSet(globalStore, path, value);\n  storeListeners.forEach(fn => fn(globalStore));\n  rerender();\n}\n\nexport function useStoreSubscribe(listener) {\n  storeListeners.add(listener);\n  return () => storeListeners.delete(listener);\n}\n","import { rerender } from './rerender.js';\n\nconst globalMiddlewares = [];\n\nexport function useGlobalMiddleware(middlewareFn) {\n  globalMiddlewares.push(middlewareFn);\n}\n\nexport function buildPath(template, query = {}, params = {}) {\n  let path = template;\n\n  path = path.replace(/{(.*?)}/g, (_, key) => params[key] || '');\n\n  const queryStr = Object.entries(query)\n    .map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)\n    .join('&');\n\n  return queryStr ? `${path}?${queryStr}` : path;\n}\n\nfunction pathToRegex(path) {\n  return new RegExp('^' + path\n    .replace(/:([\\w]+)\\*/g, '(.*)')    // catch all\n    .replace(/:([\\w]+)/g, '([^/]+)')   // single dynamic\n    + '$');\n}\n\nfunction getParams(match, route) {\n  const values = match.slice(1);\n  const keys = Array.from(route.path.matchAll(/:([\\w]+)\\*?/g)).map(m => m[1]);\n\n  const params = {};\n  keys.forEach((key, index) => {\n    const raw = values[index];\n    params[key] = raw.includes('/') ? raw.split('/') : raw;\n  });\n\n  return params;\n}\n\nexport function Router({ routes, fallback = () => '404 Not Found' }) {\n  let current = {\n    path: window.location.pathname,\n    params: {},\n    component: fallback\n  };\n\n  async function onLocationChange() {\n    const pathname = window.location.pathname;\n\n    for (const route of routes) {\n      const regex = pathToRegex(route.path);\n      const match = pathname.match(regex);\n\n      if (match) {\n        const params = getParams(match, route);\n        const context = { path: pathname, params };\n\n        for (const mw of globalMiddlewares) {\n          const result = await mw(context);\n          if (result === false) return;\n          if (typeof result === 'string') return navigate(result);\n        }\n\n        if (route.middleware) {\n          const middlewares = Array.isArray(route.middleware) ? route.middleware : [route.middleware];\n          for (const mw of middlewares) {\n            const result = await mw(context);\n            if (result === false) return;\n            if (typeof result === 'string') return navigate(result);\n          }\n        }\n\n        current = { path: pathname, params, component: route.component };\n        rerender();\n        return;\n      }\n    }\n\n    current = { path: pathname, params: {}, component: fallback };\n    rerender();\n  }\n\n  window.addEventListener('popstate', onLocationChange);\n  onLocationChange();\n\n  const Page = current.component;\n  return Page ? Page({ params: current.params }) : null;\n}\n\nexport function navigate(path) {\n  window.history.pushState({}, '', path);\n  window.dispatchEvent(new Event('popstate'));\n}\n","import preactConfig from './config.js';\nimport { logEvent } from './logger.js';\nimport { triggerEvent, registerListener } from './events.js';\nimport { $store, setStoreValue } from './store.js';\nimport { navigate, buildPath } from './router.js';\n\nexport function render(vnode, container) {\n  container.innerHTML = '';\n  container.appendChild(createDomElement(vnode));\n}\n\nexport function rerender() {\n  // Add rerender logic if needed for future diff optimization\n}\n\nexport function createDomElement(vnode) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return document.createTextNode(vnode);\n  }\n  \n  if (typeof vnode.type === 'function') {\n    const node = createNode(vnode);\n    const componentVNode = vnode.type({ ...vnode.props }, node);\n    const el = createDomElement(componentVNode);\n    \n    setTimeout(() => {\n      if (preactConfig.isDebugMode) node.log('mounted');\n    }, 0);\n    \n    return el;\n  }\n  \n  const el = document.createElement(vnode.type);\n  \n  for (const [name, value] of Object.entries(vnode.props || {})) {\n    if (name.startsWith('@')) {\n      el.addEventListener(name.slice(1), value);\n    } else {\n      el.setAttribute(name, value);\n    }\n  }\n  \n  for (const child of vnode.children) {\n    el.appendChild(createDomElement(child));\n  }\n  \n  return el;\n}\n\nfunction createNode(vnode) {\n  const url = new URL(window.location.href);\n\n  const node = {\n    path: url.pathname,\n    host: url.host,\n    queryParams: Object.fromEntries(url.searchParams.entries()),\n    hash: url.hash,\n    urlParams: vnode.props?.params || {},\n    forceRender: false,\n    $store: $store,\n    store: (keyPath, value) => setStoreValue(keyPath, value),\n    storeSlice: (slice) => ({\n      store: (keyPath, value) => setStoreValue(`${slice}.${keyPath}`, value)\n    }),\n    log: (eventName, ...params) => {\n      logEvent(vnode.type.name || 'UnknownComponent', eventName, params[0] || {});\n    },\n    navigate: (pathTemplate, queryParams = {}, params = {}) => {\n      navigate(buildPath(pathTemplate, queryParams, params));\n    },\n    trigger(eventName, payload) {\n      triggerEvent(eventName, payload);\n    },\n    onTrigger(eventName, callback) {\n      const componentName = vnode.type.name || 'UnknownComponent';\n      return registerListener(eventName, callback, componentName);\n    }\n  };\n\n  if (preactConfig.isDebugMode) {\n    node.log('created');\n  }\n  \n  return node;\n}\n","function safeStorage(storage) {\n  try {\n    storage.setItem('__test', '1');\n    storage.removeItem('__test');\n    return storage;\n  } catch {\n    let memory = {};\n    return {\n      getItem: (k) => memory[k],\n      setItem: (k, v) => memory[k] = v,\n      removeItem: (k) => delete memory[k],\n      clear: () => { memory = {}; }\n    };\n  }\n}\n\nexport const SafeLocalStorage = safeStorage(window.localStorage);\nexport const SafeSessionStorage = safeStorage(window.sessionStorage);\n","const ENVIRONMENTS = {\n  development: { apiBaseURL: 'http://localhost:3000/api' },\n  staging: { apiBaseURL: 'https://staging.api.dreamtree.in.net/api' },\n  production: { apiBaseURL: 'https://api.dreamtree.in.net/api' }\n};\n\nexport const ENV = (() => {\n  const hostname = window.location.hostname;\n  if (hostname.includes('localhost')) return ENVIRONMENTS.development;\n  if (hostname.includes('staging')) return ENVIRONMENTS.staging;\n  return ENVIRONMENTS.production;\n})();\n","export const Mixin = {\n  Providers({ value, children }) {\n    window.__preact_context = { ...window.__preact_context, ...value };\n    return children;\n  }\n};\n","function deepEqual(obj1, obj2) {\n  return JSON.stringify(obj1) === JSON.stringify(obj2);\n}\n\nexport function memo(Component, areEqual = deepEqual) {\n  return function MemoizedComponent(props, node) {\n    const cacheKey = `${Component.name}_${JSON.stringify(props)}`;\n    const lastRender = node.memoCache?.[Component.name];\n\n    if (lastRender && areEqual(lastRender.props, props)) {\n      return lastRender.vnode;\n    }\n\n    const vnode = Component(props, node);\n    node.memoCache = node.memoCache || {};\n    node.memoCache[Component.name] = { props, vnode };\n    return vnode;\n  };\n}\n","if (typeof Promise === 'undefined') {\n    import('https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js');\n  }\n  \n  if (typeof Object.assign !== 'function') {\n    Object.assign = function(target, ...args) {\n      if (target == null) throw new TypeError('Cannot convert undefined or null to object');\n      for (let i = 0; i < args.length; i++) {\n        const source = args[i];\n        if (source != null) {\n          for (const key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n      }\n      return target;\n    };\n  }\n  ","import { ENV } from './env.js';\n\nexport async function api(path, method = 'GET', body = null, headers = {}) {\n  const url = ENV.apiBaseURL + path;\n  const options = { method, headers: { 'Content-Type': 'application/json', ...headers } };\n  if (body) options.body = JSON.stringify(body);\n\n  const res = await fetch(url, options);\n  return res.headers.get('content-type')?.includes('application/json') ? res.json() : res.text();\n}\n","import { createElement } from './vdom.js';\nimport { render } from './render.js';\nimport preactConfig from './config.js';\n\nexport function createApp(App, selector = '#app', props = {}) {\n  const container = document.querySelector(selector);\n\n  function mount() {\n    import('./polyfills.js');\n    const vnode = createElement(App, props);\n    render(vnode, container);\n  }\n\n  const app = {\n    mount,\n    debug: false\n  };\n\n  Object.defineProperty(app, 'debug', {\n    get: () => preactConfig.isDebugMode,\n    set: (value) => {\n      preactConfig.isDebugMode = value;\n      window.__preact_debug__ = value;\n    }\n  });\n\n  return app;\n}\n","export function loadPages() {\n  const pages = import.meta.glob('/resources/js/pages/**/page.jsx', { eager: true });\n\n  const routes = [];\n\n  for (const path in pages) {\n    const page = pages[path];\n\n    let routePath = path\n      .replace('/resources/js/pages', '')\n      .replace('/page.jsx', '')\n      .replace(/\\*as\\[(.*?)\\]/g, ':$1*')\n      .replace(/\\[(.*?)\\]/g, ':$1')\n      .replace(/\\/index$/, '/');\n\n    routes.push({\n      path: routePath === '' ? '/' : routePath,\n      component: page.default,\n      middleware: page.middleware || []\n    });\n  }\n\n  return routes;\n}\n","export function onEnter(el, animation = 'fade-in') {\n  el.classList.add('preact-anim-enter', animation);\n  requestAnimationFrame(() => {\n    el.classList.add('preact-anim-enter-active');\n  });\n}\n\nexport function onExit(el, animation = 'fade-out', done = () => {}) {\n  el.classList.add('preact-anim-exit', animation);\n  el.addEventListener('animationend', done, { once: true });\n}\n","import { rerender } from './rerender.js';\n\nexport function useState(initialState = {}) {\n  let listeners = new Set();\n  let changeWatchers = new Map();\n  let currentState = initialState;\n\n  function notifyChange(newState, oldState) {\n    for (const [key, callback] of changeWatchers) {\n      if (key === '*') {\n        callback(newState, oldState);\n      } else {\n        const keys = key.split('.');\n        const newVal = keys.reduce((acc, k) => acc?.[k], newState);\n        const oldVal = keys.reduce((acc, k) => acc?.[k], oldState);\n        if (newVal !== oldVal) {\n          callback(newVal, oldVal);\n        }\n      }\n    }\n  }\n\n  function createProxy(state, rootPath = '') {\n    return new Proxy(state, {\n      get(target, prop) {\n        const value = target[prop];\n        if (typeof value === 'object' && value !== null) {\n          return createProxy(value, `${rootPath}${prop}.`);\n        }\n        return value;\n      },\n      set(target, prop, value) {\n        const oldState = JSON.parse(JSON.stringify(currentState));\n        target[prop] = value;\n        notifyChange(currentState, oldState);\n        listeners.forEach(fn => fn(currentState));\n        rerender();\n        return true;\n      }\n    });\n  }\n\n  const proxyState = createProxy(currentState);\n\n  function onLocalStateChange(watchers) {\n    if (typeof watchers === 'function') {\n      changeWatchers.set('*', watchers);\n    } else {\n      Object.entries(watchers).forEach(([path, callback]) => {\n        changeWatchers.set(path, callback);\n      });\n    }\n  }\n\n  function setLocalState(updater) {\n    const oldState = JSON.parse(JSON.stringify(currentState));\n    if (typeof updater === 'function') {\n      currentState = updater(currentState);\n    } else {\n      currentState = { ...currentState, ...updater };\n    }\n    notifyChange(currentState, oldState);\n    listeners.forEach(fn => fn(currentState));\n    rerender();\n  }\n\n  return [proxyState, onLocalStateChange, setLocalState];\n}\n"],"names":["createElement","type","props","children","preactConfig","isDebugMode","isSSR","logEvent","componentName","eventName","params","window","dataLayer","push","event","pushToDataLayer","felogs","pushToFeLogs","__preact_debug__","console","groupCollapsed","log","groupEnd","globalListeners","Map","idCounter","globalStore","storeListeners","Set","$store","createStoreProxy","state","Proxy","get","target","key","value","set","forEach","fn","setStoreValue","path","obj","keys","split","current","i","length","deepSet","globalMiddlewares","getParams","match","route","values","slice","Array","from","matchAll","map","m","index","raw","includes","navigate","history","pushState","dispatchEvent","Event","render","vnode","container","innerHTML","appendChild","createDomElement","document","createTextNode","node","url","URL","location","href","pathname","host","queryParams","Object","fromEntries","searchParams","entries","hash","urlParams","forceRender","store","keyPath","storeSlice","name","pathTemplate","template","query","replace","_","queryStr","k","v","encodeURIComponent","join","buildPath","trigger","payload","scope","callback","triggerEvent","onTrigger","id","delete","registerListener","createNode","el","setTimeout","startsWith","addEventListener","setAttribute","child","safeStorage","storage","setItem","removeItem","memory","getItem","clear","SafeLocalStorage","localStorage","SafeSessionStorage","sessionStorage","ENVIRONMENTS","apiBaseURL","ENV","hostname","Mixin","Providers","__preact_context","deepEqual","obj1","obj2","JSON","stringify","Promise","import","assign","args","TypeError","source","prototype","hasOwnProperty","call","routes","fallback","component","async","onLocationChange","regex","RegExp","context","mw","result","middleware","middlewares","isArray","Page","method","body","headers","options","res","fetch","json","text","App","selector","querySelector","app","mount","debug","defineProperty","pages","undefined","eager","page","routePath","default","Component","areEqual","lastRender","memoCache","animation","classList","add","requestAnimationFrame","done","once","middlewareFn","initialState","listeners","changeWatchers","currentState","notifyChange","newState","oldState","newVal","reduce","acc","oldVal","createProxy","rootPath","prop","parse","watchers","updater","listener"],"mappings":"8OAAO,SAASA,EAAcC,EAAMC,EAAQ,CAAE,KAAKC,GAC/C,MAAO,CAAEF,OAAMC,MAAOA,GAAS,CAAE,EAAEC,WACvC,CCFe,IAAAC,EAAA,CACXC,aAAa,EACbC,OAAO,GCQJ,SAASC,EAASC,EAAeC,EAAWC,EAAS,CAAA,IAVrD,SAAyBD,EAAWC,GACzCC,OAAOC,UAAYD,OAAOC,WAAa,GACvCD,OAAOC,UAAUC,KAAK,CAAEC,MAAOL,KAAcC,GAC/C,CAQEK,CAAgBN,EAAWC,GANtB,SAAsBD,EAAWC,GACtCC,OAAOK,OAASL,OAAOK,QAAU,GACjCL,OAAOK,OAAOH,KAAK,CAAEC,MAAOL,KAAcC,GAC5C,CAIEO,CAAaR,EAAWC,GAEpBC,OAAOO,mBACTC,QAAQC,eAAe,aAAaZ,KACpCW,QAAQE,IAAI,SAAUZ,GACtBU,QAAQE,IAAI,UAAWX,GACvBS,QAAQG,WAEZ,CCpBA,MAAMC,EAAkB,IAAIC,IAC5B,IAAIC,EAAY,ECChB,MAAMC,EAAc,CAAA,EACpB,IAAIC,EAAiB,IAAIC,IAkCb,MAACC,EAlBb,SAASC,EAAiBC,GACxB,OAAO,IAAIC,MAAMD,EAAO,CACtB,GAAAE,CAAIC,EAAQC,GACV,MAAMC,EAAQF,EAAOC,GACrB,MAAqB,iBAAVC,GAAgC,OAAVA,EACxBN,EAAiBM,GAEnBA,CACR,EACDC,IAAG,CAACH,EAAQC,EAAKC,KACfF,EAAOC,GAAOC,EACdT,EAAeW,SAAQC,GAAMA,EAAGb,MAEzB,IAGb,CAEsBI,CAAiBJ,GAEhC,SAASc,EAAcC,EAAML,IAlCpC,SAAiBM,EAAKD,EAAML,GAC1B,MAAMO,EAAOF,EAAKG,MAAM,KACxB,IAAIC,EAAUH,EACd,IAAK,IAAII,EAAI,EAAGA,EAAIH,EAAKI,OAAS,EAAGD,IAC9BD,EAAQF,EAAKG,MAAKD,EAAQF,EAAKG,IAAM,IAC1CD,EAAUA,EAAQF,EAAKG,IAEzBD,EAAQF,EAAKA,EAAKI,OAAS,IAAMX,CACnC,CA2BEY,CAAQtB,EAAae,EAAML,GAC3BT,EAAeW,SAAQC,GAAMA,EAAGb,IAElC,CCzCA,MAAMuB,EAAoB,GAyB1B,SAASC,EAAUC,EAAOC,GACxB,MAAMC,EAASF,EAAMG,MAAM,GACrBX,EAAOY,MAAMC,KAAKJ,EAAMX,KAAKgB,SAAS,iBAAiBC,KAAIC,GAAKA,EAAE,KAElEjD,EAAS,CAAA,EAMf,OALAiC,EAAKL,SAAQ,CAACH,EAAKyB,KACjB,MAAMC,EAAMR,EAAOO,GACnBlD,EAAOyB,GAAO0B,EAAIC,SAAS,KAAOD,EAAIjB,MAAM,KAAOiB,CAAG,IAGjDnD,CACT,CAoDO,SAASqD,EAAStB,GACvB9B,OAAOqD,QAAQC,UAAU,CAAE,EAAE,GAAIxB,GACjC9B,OAAOuD,cAAc,IAAIC,MAAM,YACjC,CCvFO,SAASC,EAAOC,EAAOC,GAC5BA,EAAUC,UAAY,GACtBD,EAAUE,YAAYC,EAAiBJ,GACzC,CAMO,SAASI,EAAiBJ,GAC/B,GAAqB,iBAAVA,GAAuC,iBAAVA,EACtC,OAAOK,SAASC,eAAeN,GAGjC,GAA0B,mBAAfA,EAAMpE,KAAqB,CACpC,MAAM2E,EA4BV,SAAoBP,GAClB,MAAMQ,EAAM,IAAIC,IAAInE,OAAOoE,SAASC,MAE9BJ,EAAO,CACXnC,KAAMoC,EAAII,SACVC,KAAML,EAAIK,KACVC,YAAaC,OAAOC,YAAYR,EAAIS,aAAaC,WACjDC,KAAMX,EAAIW,KACVC,UAAWpB,EAAMnE,OAAOQ,QAAU,CAAE,EACpCgF,aAAa,EACb7D,OAAQA,EACR8D,MAAO,CAACC,EAASxD,IAAUI,EAAcoD,EAASxD,GAClDyD,WAAavC,IAAW,CACtBqC,MAAO,CAACC,EAASxD,IAAUI,EAAc,GAAGc,KAASsC,IAAWxD,KAElEf,IAAK,CAACZ,KAAcC,KAClBH,EAAS8D,EAAMpE,KAAK6F,MAAQ,mBAAoBrF,EAAWC,EAAO,IAAM,CAAA,EAAG,EAE7EqD,SAAU,CAACgC,EAAcZ,EAAc,CAAA,EAAIzE,EAAS,CAAA,KAClDqD,ED5DC,SAAmBiC,EAAUC,EAAQ,CAAA,EAAIvF,EAAS,CAAA,GACvD,IAAI+B,EAAOuD,EAEXvD,EAAOA,EAAKyD,QAAQ,YAAY,CAACC,EAAGhE,IAAQzB,EAAOyB,IAAQ,KAE3D,MAAMiE,EAAWhB,OAAOG,QAAQU,GAC7BvC,KAAI,EAAE2C,EAAGC,KAAO,GAAGC,mBAAmBF,MAAME,mBAAmBD,OAC/DE,KAAK,KAER,OAAOJ,EAAW,GAAG3D,KAAQ2D,IAAa3D,CAC5C,CCkDegE,CAAUV,EAAcZ,EAAazE,GAAQ,EAExD,OAAAgG,CAAQjG,EAAWkG,IHnEhB,SAAsBlG,EAAWkG,EAASC,EAAQ,MACvDrF,EAAgBe,SAAQ,EAAGxB,QAAO+F,WAAUrG,oBACtCM,IAAUL,GAAemG,IAASA,EAAM9C,SAAStD,IACnDqG,EAASF,EACV,GAEL,CG8DMG,CAAarG,EAAWkG,EACzB,EACDI,UAAS,CAACtG,EAAWoG,IH9DlB,SAA0B/F,EAAO+F,EAAUrG,GAChD,MAAMwG,IAAOvF,EAEb,OADAF,EAAgBc,IAAI2E,EAAI,CAAElG,QAAO+F,WAAUrG,kBACpC,IAAMe,EAAgB0F,OAAOD,EACtC,CG4DaE,CAAiBzG,EAAWoG,EADbxC,EAAMpE,KAAK6F,MAAQ,qBAKzC1F,EAAaC,aACfuE,EAAKvD,IAAI,WAGX,OAAOuD,CACT,CA/DiBuC,CAAW9C,GAElB+C,EAAK3C,EADYJ,EAAMpE,KAAK,IAAKoE,EAAMnE,OAAS0E,IAOtD,OAJAyC,YAAW,KACLjH,EAAaC,aAAauE,EAAKvD,IAAI,UAAU,GAChD,GAEI+F,CACR,CAED,MAAMA,EAAK1C,SAAS1E,cAAcqE,EAAMpE,MAExC,IAAK,MAAO6F,EAAM1D,KAAUgD,OAAOG,QAAQlB,EAAMnE,OAAS,CAAA,GACpD4F,EAAKwB,WAAW,KAClBF,EAAGG,iBAAiBzB,EAAKxC,MAAM,GAAIlB,GAEnCgF,EAAGI,aAAa1B,EAAM1D,GAI1B,IAAK,MAAMqF,KAASpD,EAAMlE,SACxBiH,EAAG5C,YAAYC,EAAiBgD,IAGlC,OAAOL,CACT,CC/CA,SAASM,EAAYC,GACnB,IAGE,OAFAA,EAAQC,QAAQ,SAAU,KAC1BD,EAAQE,WAAW,UACZF,CACX,CAAI,MACA,IAAIG,EAAS,CAAA,EACb,MAAO,CACLC,QAAU1B,GAAMyB,EAAOzB,GACvBuB,QAAS,CAACvB,EAAGC,IAAMwB,EAAOzB,GAAKC,EAC/BuB,WAAaxB,UAAayB,EAAOzB,GACjC2B,MAAO,KAAQF,EAAS,CAAA,CAAE,EAE7B,CACH,CAEY,MAACG,EAAmBP,EAAY/G,OAAOuH,cACtCC,EAAqBT,EAAY/G,OAAOyH,gBCjB/CC,EACS,CAAEC,WAAY,6BADvBD,EAEK,CAAEC,WAAY,4CAFnBD,EAGQ,CAAEC,WAAY,oCAGfC,EAAM,MACjB,MAAMC,EAAW7H,OAAOoE,SAASyD,SACjC,OAAIA,EAAS1E,SAAS,aAAqBuE,EACvCG,EAAS1E,SAAS,WAAmBuE,EAClCA,CACR,EALkB,GCNP,MAACI,EAAQ,CACnBC,UAAS,EAACtG,MAAEA,EAAKjC,SAAEA,MACjBQ,OAAOgI,iBAAmB,IAAKhI,OAAOgI,oBAAqBvG,GACpDjC,ICHX,SAASyI,EAAUC,EAAMC,GACvB,OAAOC,KAAKC,UAAUH,KAAUE,KAAKC,UAAUF,EACjD,CCFuB,oBAAZG,SACPC,OAAO,wEAGoB,mBAAlB9D,OAAO+D,SAChB/D,OAAO+D,OAAS,SAASjH,KAAWkH,GAClC,GAAc,MAAVlH,EAAgB,MAAM,IAAImH,UAAU,8CACxC,IAAK,IAAIvG,EAAI,EAAGA,EAAIsG,EAAKrG,OAAQD,IAAK,CACpC,MAAMwG,EAASF,EAAKtG,GACpB,GAAc,MAAVwG,EACF,IAAK,MAAMnH,KAAOmH,EACZlE,OAAOmE,UAAUC,eAAeC,KAAKH,EAAQnH,KAC/CD,EAAOC,GAAOmH,EAAOnH,GAI5B,CACD,OAAOD,CACb,+ENsBO,UAAgBwH,OAAEA,EAAMC,SAAEA,EAAW,IAAM,kBAChD,IAAI9G,EAAU,CACZJ,KAAM9B,OAAOoE,SAASE,SACtBvE,OAAQ,CAAE,EACVkJ,UAAWD,GAGbE,eAAeC,IACb,MAAM7E,EAAWtE,OAAOoE,SAASE,SAEjC,IAAK,MAAM7B,KAASsG,EAAQ,CAC1B,MAAMK,GA/BStH,EA+BWW,EAAMX,KA9B7B,IAAIuH,OAAO,IAAMvH,EACrByD,QAAQ,cAAe,QACvBA,QAAQ,YAAa,WACpB,MA4BM/C,EAAQ8B,EAAS9B,MAAM4G,GAE7B,GAAI5G,EAAO,CACT,MAAMzC,EAASwC,EAAUC,EAAOC,GAC1B6G,EAAU,CAAExH,KAAMwC,EAAUvE,UAElC,IAAK,MAAMwJ,KAAMjH,EAAmB,CAClC,MAAMkH,QAAeD,EAAGD,GACxB,IAAe,IAAXE,EAAkB,OACtB,GAAsB,iBAAXA,EAAqB,OAAOpG,EAASoG,EACjD,CAED,GAAI/G,EAAMgH,WAAY,CACpB,MAAMC,EAAc9G,MAAM+G,QAAQlH,EAAMgH,YAAchH,EAAMgH,WAAa,CAAChH,EAAMgH,YAChF,IAAK,MAAMF,KAAMG,EAAa,CAC5B,MAAMF,QAAeD,EAAGD,GACxB,IAAe,IAAXE,EAAkB,OACtB,GAAsB,iBAAXA,EAAqB,OAAOpG,EAASoG,EACjD,CACF,CAID,YAFAtH,EAAU,CAAEJ,KAAMwC,EAAUvE,SAAQkJ,UAAWxG,EAAMwG,WAGtD,CACF,CAzDL,IAAqBnH,EA2DjBI,EAAU,CAAEJ,KAAMwC,EAAUvE,OAAQ,GAAIkJ,UAAWD,EAEpD,CAEDhJ,OAAO4G,iBAAiB,WAAYuC,GACpCA,IAEA,MAAMS,EAAO1H,EAAQ+G,UACrB,OAAOW,EAAOA,EAAK,CAAE7J,OAAQmC,EAAQnC,SAAY,IACnD,oDOtFOmJ,eAAmBpH,EAAM+H,EAAS,MAAOC,EAAO,KAAMC,EAAU,IACrE,MAAM7F,EAAM0D,EAAID,WAAa7F,EACvBkI,EAAU,CAAEH,SAAQE,QAAS,CAAE,eAAgB,sBAAuBA,IACxED,IAAME,EAAQF,KAAO1B,KAAKC,UAAUyB,IAExC,MAAMG,QAAYC,MAAMhG,EAAK8F,GAC7B,OAAOC,EAAIF,QAAQzI,IAAI,iBAAiB6B,SAAS,oBAAsB8G,EAAIE,OAASF,EAAIG,MAC1F,cCLO,SAAmBC,EAAKC,EAAW,OAAQ/K,EAAQ,CAAA,GACxD,MAAMoE,EAAYI,SAASwG,cAAcD,GAQnCE,EAAM,CACVC,MAPF,WACEnC,+CAEA7E,EADcpE,EAAcgL,EAAK9K,GACnBoE,EACf,EAIC+G,OAAO,GAWT,OARAjG,OAAOkG,eAAeH,EAAK,QAAS,CAClClJ,IAAK,IAAM7B,EAAaC,YACxBgC,IAAMD,IACJhC,EAAaC,YAAc+B,EAC3BzB,OAAOO,iBAAmBkB,CAAK,IAI5B+I,CACT,gCC3BO,WACL,MAAMI,QAAQC,GAAiB,kCAAmC,CAAEC,OAAO,IAErE/B,EAAS,GAEf,IAAK,MAAMjH,KAAQ8I,EAAO,CACxB,MAAMG,EAAOH,EAAM9I,GAEnB,IAAIkJ,EAAYlJ,EACbyD,QAAQ,sBAAuB,IAC/BA,QAAQ,YAAa,IACrBA,QAAQ,iBAAkB,QAC1BA,QAAQ,aAAc,OACtBA,QAAQ,WAAY,KAEvBwD,EAAO7I,KAAK,CACV4B,KAAoB,KAAdkJ,EAAmB,IAAMA,EAC/B/B,UAAW8B,EAAKE,QAChBxB,WAAYsB,EAAKtB,YAAc,IAElC,CAED,OAAOV,CACT,SJnBO,SAAcmC,EAAWC,EAAWlD,GACzC,OAAO,SAA2B1I,EAAO0E,GACnBiH,EAAU/F,KAAQiD,KAAKC,UAAU9I,GACrD,MAAM6L,EAAanH,EAAKoH,YAAYH,EAAU/F,MAE9C,GAAIiG,GAAcD,EAASC,EAAW7L,MAAOA,GAC3C,OAAO6L,EAAW1H,MAGpB,MAAMA,EAAQwH,EAAU3L,EAAO0E,GAG/B,OAFAA,EAAKoH,UAAYpH,EAAKoH,WAAa,CAAA,EACnCpH,EAAKoH,UAAUH,EAAU/F,MAAQ,CAAE5F,QAAOmE,SACnCA,CACX,CACA,yBKlBO,SAAiB+C,EAAI6E,EAAY,WACtC7E,EAAG8E,UAAUC,IAAI,oBAAqBF,GACtCG,uBAAsB,KACpBhF,EAAG8E,UAAUC,IAAI,2BAA2B,GAEhD,WAEO,SAAgB/E,EAAI6E,EAAY,WAAYI,EAAO,QACxDjF,EAAG8E,UAAUC,IAAI,mBAAoBF,GACrC7E,EAAGG,iBAAiB,eAAgB8E,EAAM,CAAEC,MAAM,GACpD,wBTCO,WAEP,0CDTO,SAA6BC,GAClCtJ,EAAkBpC,KAAK0L,EACzB,aWJO,SAAkBC,EAAe,IACtC,IAAIC,EAAY,IAAI7K,IAChB8K,EAAiB,IAAIlL,IACrBmL,EAAeH,EAEnB,SAASI,EAAaC,EAAUC,GAC9B,IAAK,MAAO3K,EAAK0E,KAAa6F,EAC5B,GAAY,MAARvK,EACF0E,EAASgG,EAAUC,OACd,CACL,MAAMnK,EAAOR,EAAIS,MAAM,KACjBmK,EAASpK,EAAKqK,QAAO,CAACC,EAAK5G,IAAM4G,IAAM5G,IAAIwG,GAC3CK,EAASvK,EAAKqK,QAAO,CAACC,EAAK5G,IAAM4G,IAAM5G,IAAIyG,GAC7CC,IAAWG,GACbrG,EAASkG,EAAQG,EAEpB,CAEJ,CA8CD,MAAO,CA5CP,SAASC,EAAYpL,EAAOqL,EAAW,IACrC,OAAO,IAAIpL,MAAMD,EAAO,CACtB,GAAAE,CAAIC,EAAQmL,GACV,MAAMjL,EAAQF,EAAOmL,GACrB,MAAqB,iBAAVjL,GAAgC,OAAVA,EACxB+K,EAAY/K,EAAO,GAAGgL,IAAWC,MAEnCjL,CACR,EACD,GAAAC,CAAIH,EAAQmL,EAAMjL,GAChB,MAAM0K,EAAW/D,KAAKuE,MAAMvE,KAAKC,UAAU2D,IAK3C,OAJAzK,EAAOmL,GAAQjL,EACfwK,EAAaD,EAAcG,GAC3BL,EAAUnK,SAAQC,GAAMA,EAAGoK,MAEpB,CACR,GAEJ,CAEkBQ,CAAYR,GAE/B,SAA4BY,GACF,mBAAbA,EACTb,EAAerK,IAAI,IAAKkL,GAExBnI,OAAOG,QAAQgI,GAAUjL,SAAQ,EAAEG,EAAMoE,MACvC6F,EAAerK,IAAII,EAAMoE,EAAS,GAGvC,EAED,SAAuB2G,GACrB,MAAMV,EAAW/D,KAAKuE,MAAMvE,KAAKC,UAAU2D,IAEzCA,EADqB,mBAAZa,EACMA,EAAQb,GAER,IAAKA,KAAiBa,GAEvCZ,EAAaD,EAAcG,GAC3BL,EAAUnK,SAAQC,GAAMA,EAAGoK,IAE5B,EAGH,sBZtBO,SAA2Bc,GAEhC,OADA9L,EAAewK,IAAIsB,GACZ,IAAM9L,EAAesF,OAAOwG,EACrC"}