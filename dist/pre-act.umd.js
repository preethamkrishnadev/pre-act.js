!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).PreAct={})}(this,(function(e){"use strict";function t(e,t={},...n){return{type:e,props:t||{},children:n}}let n=!1;function o(e,t,n={}){!function(e,t){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:e,...t})}(t,n),function(e,t){window.felogs=window.felogs||[],window.felogs.push({event:e,...t})}(t,n),window.__preact_debug__&&(console.groupCollapsed(`[Logging] ${e}`),console.log("Event:",t),console.log("Params:",n),console.groupEnd())}const r=new Map;let a=0;const i={};let c=new Set;const s=function e(t){return new Proxy(t,{get(t,n){const o=t[n];return"object"==typeof o&&null!==o?e(o):o},set:(e,t,n)=>(e[t]=n,c.forEach((e=>e(i))),!0)})}(i);function p(e,t){!function(e,t,n){const o=t.split(".");let r=e;for(let e=0;e<o.length-1;e++)r[o[e]]||(r[o[e]]={}),r=r[o[e]];r[o[o.length-1]]=n}(i,e,t),c.forEach((e=>e(i)))}const u=[];function l(e,t){const n=e.slice(1),o=Array.from(t.path.matchAll(/:([\w]+)\*?/g)).map((e=>e[1])),r={};return o.forEach(((e,t)=>{const o=n[t];r[e]=o.includes("/")?o.split("/"):o})),r}function f(e){window.history.pushState({},"",e),window.dispatchEvent(new Event("popstate"))}function d(e){if("string"==typeof e||"number"==typeof e)return document.createTextNode(e);if("function"==typeof e.type){const t=function(e){const t=new URL(window.location.href),i={path:t.pathname,host:t.host,queryParams:Object.fromEntries(t.searchParams.entries()),hash:t.hash,urlParams:e.props?.params||{},forceRender:!1,$store:s,store:(e,t)=>p(e,t),storeSlice:e=>({store:(t,n)=>p(`${e}.${t}`,n)}),log:(t,...n)=>{o(e.type.name||"UnknownComponent",t,n[0]||{})},navigate:(e,t={},n={})=>{f(function(e,t={},n={}){let o=e;o=o.replace(/{(.*?)}/g,((e,t)=>n[t]||""));const r=Object.entries(t).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&");return r?`${o}?${r}`:o}(e,t,n))},trigger(e,t){!function(e,t,n=null){r.forEach((({event:o,callback:r,componentName:a})=>{o!==e||n&&!n.includes(a)||r(t)}))}(e,t)},onTrigger:(t,n)=>function(e,t,n){const o=++a;return r.set(o,{event:e,callback:t,componentName:n}),()=>r.delete(o)}(t,n,e.type.name||"UnknownComponent")};n&&i.log("created");return i}(e),i=d(e.type({...e.props},t));return setTimeout((()=>{n&&t.log("mounted")}),0),i}const t=document.createElement(e.type);for(const[n,o]of Object.entries(e.props||{}))n.startsWith("@")?t.addEventListener(n.slice(1),o):t.setAttribute(n,o);for(const n of e.children)t.appendChild(d(n));return t}function m(e){try{return e.setItem("__test","1"),e.removeItem("__test"),e}catch{let e={};return{getItem:t=>e[t],setItem:(t,n)=>e[t]=n,removeItem:t=>delete e[t],clear:()=>{e={}}}}}const h=m(window.localStorage),g=m(window.sessionStorage),w={apiBaseURL:"http://localhost:3000/api"},y={apiBaseURL:"https://staging.api.dreamtree.in.net/api"},b={apiBaseURL:"https://api.dreamtree.in.net/api"},v=(()=>{const e=window.location.hostname;return e.includes("localhost")?w:e.includes("staging")?y:b})();const _={Providers:({value:e,children:t})=>(window.__preact_context={...window.__preact_context,...e},t)};function j(e,t){return JSON.stringify(e)===JSON.stringify(t)}"undefined"==typeof Promise&&import("https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js"),"function"!=typeof Object.assign&&(Object.assign=function(e,...t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(let n=0;n<t.length;n++){const o=t[n];if(null!=o)for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e});var E=Object.freeze({__proto__:null});e.$store=s,e.ENV=v,e.Mixin=_,e.Router=function({routes:e,fallback:t=()=>"404 Not Found"}){let n={path:window.location.pathname,params:{},component:t};async function o(){const o=window.location.pathname;for(const t of e){const e=(r=t.path,new RegExp("^"+r.replace(/:([\w]+)\*/g,"(.*)").replace(/:([\w]+)/g,"([^/]+)")+"$")),a=o.match(e);if(a){const e=l(a,t),r={path:o,params:e};for(const e of u){const t=await e(r);if(!1===t)return;if("string"==typeof t)return f(t)}if(t.middleware){const e=Array.isArray(t.middleware)?t.middleware:[t.middleware];for(const t of e){const e=await t(r);if(!1===e)return;if("string"==typeof e)return f(e)}}return void(n={path:o,params:e,component:t.component})}}var r;n={path:o,params:{},component:t}}window.addEventListener("popstate",o),o();const r=n.component;return r?r({params:n.params}):null},e.SafeLocalStorage=h,e.SafeSessionStorage=g,e.api=async function(e,t="GET",n=null,o={}){const r=v.apiBaseURL+e,a={method:t,headers:{"Content-Type":"application/json",...o}};n&&(a.body=JSON.stringify(n));const i=await fetch(r,a);return i.headers.get("content-type")?.includes("application/json")?i.json():i.text()},e.createApp=function(e,o="#app",r={}){const a=document.querySelector(o),i={mount:function(){Promise.resolve().then((function(){return E})),function(e,t){t.innerHTML="",t.appendChild(createDomElement(e))}(t(e,r),a)},debug:!1};return Object.defineProperty(i,"debug",{get:()=>n,set:e=>{n=e,window.__preact_debug__=e}}),i},e.createElement=t,e.loadPages=function(){const e=(void 0)("/resources/js/pages/**/page.jsx",{eager:!0}),t=[];for(const n in e){const o=e[n];let r=n.replace("/resources/js/pages","").replace("/page.jsx","").replace(/\*as\[(.*?)\]/g,":$1*").replace(/\[(.*?)\]/g,":$1").replace(/\/index$/,"/");t.push({path:""===r?"/":r,component:o.default,middleware:o.middleware||[]})}return t},e.memo=function(e,t=j){return function(n,o){e.name,JSON.stringify(n);const r=o.memoCache?.[e.name];if(r&&t(r.props,n))return r.vnode;const a=e(n,o);return o.memoCache=o.memoCache||{},o.memoCache[e.name]={props:n,vnode:a},a}},e.navigate=f,e.onEnter=function(e,t="fade-in"){e.classList.add("preact-anim-enter",t),requestAnimationFrame((()=>{e.classList.add("preact-anim-enter-active")}))},e.onExit=function(e,t="fade-out",n=()=>{}){e.classList.add("preact-anim-exit",t),e.addEventListener("animationend",n,{once:!0})},e.render=function(e,t){t.innerHTML="",t.appendChild(d(e))},e.rerender=function(){},e.setStoreValue=p,e.useGlobalMiddleware=function(e){u.push(e)},e.useState=function(e={}){let t=new Set,n=new Map,o=e;function r(e,t){for(const[o,r]of n)if("*"===o)r(e,t);else{const n=o.split("."),a=n.reduce(((e,t)=>e?.[t]),e),i=n.reduce(((e,t)=>e?.[t]),t);a!==i&&r(a,i)}}return[function e(n,a=""){return new Proxy(n,{get(t,n){const o=t[n];return"object"==typeof o&&null!==o?e(o,`${a}${n}.`):o},set(e,n,a){const i=JSON.parse(JSON.stringify(o));return e[n]=a,r(o,i),t.forEach((e=>e(o))),!0}})}(o),function(e){"function"==typeof e?n.set("*",e):Object.entries(e).forEach((([e,t])=>{n.set(e,t)}))},function(e){const n=JSON.parse(JSON.stringify(o));o="function"==typeof e?e(o):{...o,...e},r(o,n),t.forEach((e=>e(o)))}]},e.useStoreSubscribe=function(e){return c.add(e),()=>c.delete(e)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=pre-act.umd.js.map
